binds:
- port: 3000
  listeners:
  - routes:
    - backends:
       - ai:
          name: anthropic
          provider:
            anthropic:
              model: claude-sonnet-4-5
      policies:
        backendAuth:
          key: "$ANTHROPIC_API_KEY"
        localRateLimit:
          - maxTokens: 10
            tokensPerFill: 1
            fillInterval: 60s
            type: tokens
        cors:
          allowOrigins:
            - "*"
          allowHeaders:
            - "*"

# https://agentgateway.dev/docs/configuration/resiliency/rate-limits/